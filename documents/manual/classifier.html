<html>

<head>
<title>TOC - Classifier</title>
<link rel="stylesheet" href="main.css" type="text/css" />
</head>

<body>

<h1>Technology Ontology Creation - Technology Classifier</h1>


<p class="navigation">
<a href="index.html">index</a> > <a href="classifier.html">classifier</a>
</p>

<p class="abstract">The technology classifier takes feature files created by the
document processing code and generates technology scores for all terms in those
documents. It runs off a corpus or a list of files, generates a technology score
for each term in each document, and then summarizes the score over the corpus or
list of files.</p>


<h2>Input Requirements</h2>

The input is originally created with main.py in
ontology/creation. Input can be given as an complete corpus (which is what
main.py generates) or as a list of files. In the former case the code picks out
the right files from the corpus. 

The files have lines like this:

<pre class="example">
term_id year term feature+
US4192770A.xml_0	1980	catalyst restoration	doc_loc=0	first_word=catalyst	last_word=restoration	next2_tags=IN_NN	next_n2=with_boron	next_n3=with_boron_compounds	plen=2	prev_n2=^_cracking	prev_n3=^_^_cracking	section_loc=TITLE_sent1	sent_loc=1-3	suffix3=ion	suffix4=tion	suffix5=ation	tag_sig=NN_NN
</pre>

<p>All fields, including the features, are tab-separated.</p>



<h2>Running the classifier</h2>


The top-level script for running the technology classifier is

<pre class="example">
	ontology/classifier/run_tclassify.py
</pre>


<h3>Running on a corpus</h3>

To run the classifier on a corpus (which would have been created with the
ontology/creation/main.py script), you can do something like this.</p>

<pre class="example">
$ python run_tclassify.py --classify --corpus data/corpora/patents-en-500 --model data/models/technologies-010-20140911/train.model --batch data/classifications/patents-en-500 --verbose
</pre>

This assumes that Mallet is installed in one of the default spots, which it
typically isn't. So you probably need to add the --mallet-dir option:</p>

<pre class="example">
$ python run_tclassify.py --classify --corpus data/corpora/patents-en-500 --model data/models/technologies-010-20140911/train.model --mallet-dir /home/j/corpuswork/fuse/code/patent-classifier/tools/mallet/mallet-2.0.7/bin --batch data/classifications/patents-en-500 --verbose
</pre>

<p>Change the --corpus and --batch options depending on where your data live. The
--model option here uses the model that is shipped with the code.</p>

<p>It takes about 2-3 minutes to classify 1000 patents on a regular
desktop. Processing time scales linearly.</p>

<p>The commands above create a directory data/classifications/patents-en-500
with the classification results for the concatenation of all files in the
corpus. This directory contains several files, the one you are most likely to
use is classify.MaxEnt.out.s3.scores.sum, which has lines as follows:</p>

<pre class="example">
	senses flag	0.439934	1	0.439934	0.439934
	text message	0.342870	2	0.225453	0.460288
</pre>

The columns contain: the term, the technology score, the number of occurrences
of the term in the corpus, the lowest score, and the highest score.</p>

Within the FUSE context, I typically run this on 10-50K random patents from one
year so that the results file contains the average technology score over that
year. For previous processing, BAE tended to run in batches of 1000. You could
do that here to, but if you want technology scores for an entire year then you
will have to average over all your 1000-patent batches for that year.</p>


<h3>Running on a list of files</h3>

You do not need an actual corpus to run the classifier. Instead you can provide
a file that contains a list of input files that need to be classified.</p>

<pre class="example">
$ python run_tclassify.py --classify --filelist lists/list-010.txt --model data/models/technologies-010-20140911/train.model --verbose --batch data/classifications/patents-list
</pre>

Again, change --batch and --filelist as needed and add --mallet-dir.</p>

Results are put in data/classifications/patents-list and will have the
technology scores over the concatenation of all files.</p>

</body>
</html>
